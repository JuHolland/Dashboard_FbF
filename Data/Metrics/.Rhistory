dfr <- rasterFromXYZ(df[,1:ncol(df)])
newproj <- " +proj=longlat +ellps=clrk66 +towgs84=-80,-100,-228,0,0,0,0 +no_defs "
crs(dfr) <- newproj
District.select <- subset(Admin2, ADM2_PT==Districts[dis])
dfr.mask <- mask(dfr,District.select)
for (f in 1:(ncol(df)-2)){
val2 <- getValues(dfr.mask[[f]]) #get raster values
data.chirps[g,2] <- round(mean(val2,na.rm=T),2) #remove NAs and compute mean
name <- ifelse(i>12,str_extract(listcsv3[i], "^.{7}"),str_extract(listcsv3[i], "^.{6}"))
data.chirps[g,3] <- name
countword <- sapply(strsplit(name, ""), length)
data.chirps[g,4] <- ifelse(countword==7,"SPI 3","SPI 2")
data.chirps[g,1] <- str_remove(colnames(df)[f+2],"X")
g <- g+1
}
}
View(data.chirps)
csvpath <- "C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/Outputs/SPI_ALL_YEARS/SPI2/"
listcsv <- list.files(csvpath, pattern=NULL, all.files=FALSE,full.names=FALSE)
csvname.each <- paste(csvpath, listcsv, sep="") # change
csvpath2 <- "C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/Outputs/SPI_ALL_YEARS/SPI3/"
listcsv2 <- list.files(csvpath2, pattern=NULL, all.files=FALSE,full.names=FALSE)
csvname.each2 <- paste(csvpath2, listcsv2, sep="") # change
csvname.each3 <- c(csvname.each,csvname.each2)
Number.years <- rep(1981:2021)
listcsv3 <- c(listcsv,listcsv2)
data.chirps <- as.data.frame(matrix(NA,nrow=length(Number.years)*length(listcsv3),5))
# mean spi per district
g <- 1
for (dis in 1:length(Districts)){
for (i in 1:length(csvname.each3)){
print(i)
df <- read.csv(csvname.each3[i])
dfr <- rasterFromXYZ(df[,1:ncol(df)])
newproj <- " +proj=longlat +ellps=clrk66 +towgs84=-80,-100,-228,0,0,0,0 +no_defs "
crs(dfr) <- newproj
District.select <- subset(Admin2, ADM2_PT==Districts[dis])
dfr.mask <- mask(dfr,District.select)
for (f in 1:(ncol(df)-2)){
val2 <- getValues(dfr.mask[[f]]) #get raster values
data.chirps[g,2] <- round(mean(val2,na.rm=T),2) #remove NAs and compute mean
name <- ifelse(i>12,str_extract(listcsv3[i], "^.{7}"),str_extract(listcsv3[i], "^.{6}"))
data.chirps[g,3] <- name
countword <- sapply(strsplit(name, ""), length)
data.chirps[g,4] <- ifelse(countword==7,"SPI 3","SPI 2")
data.chirps[g,1] <- str_remove(colnames(df)[f+2],"X")
data.chirps[g,5] <- Districts[dis]
g <- g+1
}
}
}
colnames(data.chirps) <- c("Years","Value","Index","Aggregation","District")
View(data.chirps)
data.chirps <- data.chirps[data.chirps$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
data.chirps$Severo <- ifelse(data.chirps$Value<=-1,1,0)
data.chirps$Moderado <- ifelse(data.chirps$Value<=-0.85,1,0)
data.chirps$Leve <- ifelse(data.chirps$Value<=-0.68,1,0)
View(data.chirps)
setwd("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/FbF_Pilot_MockUp/Observations")
write.csv(data.chirps,"SPI_observations.csv",row.names=F)
issued01.Chibuto.SPI_probability <- read.csv("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/Chibuto/issued01.Chibuto.SPI_probability.csv")
View(issued01.Chibuto.SPI_probability)
# Probabilities -----------------------------------------------------------
issues <- paste("issued",c("04","05","06","07","08","09","10","11","12","01","02"),sep="")
issues
spi.name <- paste(issues,".",Districts[dis],"SPI_probability",sep"")
spi.name <- paste(issues,".",Districts[dis],"SPI_probability",sep="")
spi.name
spi.name <- paste(issues,".",Districts[dis],".","SPI_probability",sep="")
spi.name
int<-1
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
setwd.path <- paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],sep="")
name.path <- paste(setwd.path,name,sep="/")
spi.name <- paste(issues,".",Districts[dis],".","SPI_probability",intensity[int],sep="")
spi.name
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name))
paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name)
paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep="")
is<-1
paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep="")
# Probabilities -----------------------------------------------------------
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
issues
spi.name <- paste(issues,".",Districts[dis],".","SPI_probability",intensity[int],sep="")
name.file <- paste(issues[is],".",select.district[d],".",index.thresholds[b],intensity[c],sep="")
paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep="")
name.file
paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",name.file,sep="")
spi.name <- paste(issues,".",Districts[dis],".","SPI_probability",intensity[int],sep="")
name.file <- paste(issues[is],".",select.district[d],".",index.thresholds[b],intensity[c],sep="")
spi.name <- paste(issues,".",Districts[dis],".","SPI_probability",intensity[int],sep="")
paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep="")
spi.name <- paste(issues[is],".",Districts[dis],".","SPI_probability",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
View(df)
df.all <- data.frame()
df.all <- rbind(df.all,df)
df.all
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
setwd.path <- paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],sep="")
name.path <- paste(setwd.path,name,sep="/")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","SPI_probability",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df[,5] <- Districts[dis]
df[,6] <- issues[is]
df[,7] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
View(df.all)
View(data.chirps)
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
View(df.all)
colnames(df.all) <- c("Year_of_issue","Probability","Index","Aggregation","Month_of_issue","Category")
colnames(df.all) <- c("Year_of_issue","Probability","Index","Aggregation","District","Month_of_issue","Category")
c("05","06","07","08","09","10","11","12","01","02")[is]
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
setwd.path <- paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],sep="")
name.path <- paste(setwd.path,name,sep="/")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","SPI_probability",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df[,5] <- Districts[dis]
df[,6] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,7] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
colnames(df.all) <- c("Year_of_issue","Probability","Index","Aggregation","District","Month_of_issue","Category")
View(df.all)
length(issues)
spi.name
spi.name <- paste(issues[is],".",Districts[dis],".","SPI_probability",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
View(df)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
setwd.path <- paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],sep="")
name.path <- paste(setwd.path,name,sep="/")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","SPI_probability",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df[,5] <- Districts[dis]
df[,6] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,7] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Year_of_issue","Probability","Index","Aggregation","District","Month_of_issue","Category")
View(df.all)
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
View(df.all)
write.csv(df.all,"SPI_probabilities.csv",row.names=F)
issued01.Chibuto.Thresholds <- read.csv("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/Chibuto/issued01.Chibuto.Thresholds.csv")
View(issued01.Chibuto.Thresholds)
View(issued01.Chibuto.Thresholds)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","SPI_probability",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df[,5] <- Districts[dis]
df[,6] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,7] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Year_of_issue","Probability","Index","Aggregation","District","Month_of_issue","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
setwd("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/FbF_Pilot_MockUp/Probabilities")
write.csv(df.all,"SPI_probabilities.csv",row.names=F)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
dis<-1
is<-1
int<-1
spi.name <- paste(issues[is],".",Districts[dis],".","SPI_probability",intensity[int],sep="")
spi.name
spi.name <- paste(issues[is],".",Districts[dis],".","Thresholds",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
View(df)
df <- df[,c(1,8)]
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","Thresholds",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1,8)]
df[,3] <- Districts[dis]
df[,4] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,5] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
df.all
colnames(df.all) <- c("Year_of_issue","District","Month_of_issue","Category")
View(df.all)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","Thresholds",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1,8)]
df[,3] <- Districts[dis]
df[,4] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,5] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Index","District","Month_of_issue","Category")
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","Thresholds",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1,8)]
df[,3] <- Districts[dis]
df[,4] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,5] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Index","AUROC","District","Month_of_issue","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
View(df.all)
df.all$Skill <- ifelse(df.all$AUROC<=0.5,"Poor",ifelse(df.all$AUROC>.5 & df.all$AUROC<=0.6,"Borderline",ifelse(df.all$AUROC>.6 & df.all$AUROC<=0.8,"Moderate","Good")))
setwd("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/FbF_Pilot_MockUp/Metrics")
write.csv(df.all,"SPI_AUROC.csv",row.names=F)
issued01.Chibuto.HSS <- read.csv("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/Chibuto/issued01.Chibuto.HSS.csv")
View(issued01.Chibuto.HSS)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
dis<-1
is<-1
int<-1
spi.name <- paste(issues[is],".",Districts[dis],".","HSS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
View(df)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","HSS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df[,4] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,5] <- Districts[dis]
df[,6] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
View(df.all)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","HSS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df[,4] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,5] <- Districts[dis]
df[,6] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Index","Trigger","Value","Month_of_issue","District","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","HSS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df[,4] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,5] <- Districts[dis]
df[,6] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Index","Trigger","Value","Month_of_issue","District","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
setwd("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/FbF_Pilot_MockUp/Metrics")
write.csv(df.all,"SPI_HSS.csv",row.names=F)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
spi.name <- paste(issues[is],".",Districts[dis],".","BIAS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
View(df)
spi.name <- paste(issues[is],".",Districts[dis],".","HSS",intensity[int],sep="")
df1 <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
View(df1)
View(df)
df <- df[c,(1,2,7,8)]
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","BIAS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1,2,7,8)]
df[,4] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,5] <- Districts[dis]
df[,6] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Index","Trigger","Value","Month_of_issue","District","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
View(df.all)
View(df.all)
setwd("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/FbF_Pilot_MockUp/Metrics")
write.csv(df.all,"SPI_Bias.csv",row.names=F)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
spi.name <- paste(issues[is],".",Districts[dis],".","BIAS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
View(df)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","BIAS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1:6,8)]
df[,7] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,8] <- Districts[dis]
df[,9] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
View(df.all)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","BIAS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1:6,8)]
df[,7] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,8] <- Districts[dis]
df[,9] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Index","Trigger","Hits","Misses","False","Correct","Month_of_issue","District","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
setwd("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/FbF_Pilot_MockUp/Metrics")
View(df.all)
write.csv(df.all,"SPI_outcomes.csv",row.names=F)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","BIAS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1:6,8)]
df$HR <- df$Hits/(df$Hits+df$Misses)
df$FAR <- df$False/(df$Hits+df$False)
df[,9] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,10] <- Districts[dis]
df[,11] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Index","Trigger","Hits","Misses","False","Correct","Hit.Rate","False.Alarm.Ratio","Month_of_issue","District","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
setwd("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/FbF_Pilot_MockUp/Metrics")
write.csv(df.all,"SPI_outcomes.csv",row.names=F)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","BIAS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1:6)]
df$HR <- df$Hits/(df$Hits+df$Misses)
df$FAR <- df$False/(df$Hits+df$False)
df[,9] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,10] <- Districts[dis]
df[,11] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
colnames(df.all) <- c("Index","Trigger","Hits","Misses","False","Correct","Hit.Rate","False.Alarm.Ratio","Month_of_issue","District","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
colnames(df.all) <- c("Index","Trigger","Hits","Misses","False","Correct","Hit.Rate","False.Alarm.Ratio","Month_of_issue","District","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
setwd("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/FbF_Pilot_MockUp/Metrics")
write.csv(df.all,"SPI_outcomes.csv",row.names=F)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","KUIPERS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1,2,7,8)]
df[,4] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,5] <- Districts[dis]
df[,6] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
View(df.all)
spi.name <- paste(issues[is],".",Districts[dis],".","KUIPERS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
View(df)
issues <- paste("issued",c("05","06","07","08","09","10","11","12","01","02"),sep="")
intensity <- c(".csv","_085.csv","_068.csv") # severe,moderate,mild
Districts <- c("Chibuto","Guija","Changara","Marara")
df.all <- data.frame()
for (dis in 1:length(Districts)){
for (is in 1:length(issues)){
for (int in 1:length(intensity)){
spi.name <- paste(issues[is],".",Districts[dis],".","KUIPERS",intensity[int],sep="")
df <- read.csv(paste("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Plots/",Districts[dis],"/",spi.name,sep=""))
df <- df[,c(1,2,6)]
df[,4] <- c("05","06","07","08","09","10","11","12","01","02")[is]
df[,5] <- Districts[dis]
df[,6] <- ifelse(int==1,"Severo",ifelse(int==2,"Moderado","Leve"))
df.all <- rbind(df.all,df)
}
}
}
View(df.all)
colnames(df.all) <- c("Trigger","Index","Value","Month_of_issue","District","Category")
df.all <- df.all[df.all$Index %in% c("SPI ON","SPI ND","SPI DJ","SPI JF","SPI FM","SPI OND","SPI NDJ","SPI DJF","SPI JFM"),]
setwd("C:/Users/gabriela.nobre/OneDrive - World Food Programme/Mozambique/FbF/Seasonal Forecasts/Dataset/FbF_Pilot_MockUp/Metrics")
write.csv(df.all,"SPI_Kuipers.csv",row.names=F)
